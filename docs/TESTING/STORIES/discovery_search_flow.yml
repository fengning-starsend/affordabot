id: discovery_search_flow
description: "Admin searches for legislation sources using Z.ai discovery"
persona: admin_operator
priority: P0
timeout_seconds: 90
goals:
  - "Verify discovery page loads with search interface"
  - "Test jurisdiction selection dropdown works"
  - "Confirm search results display (or appropriate no-results state)"
  - "Verify URL list rendering if sources found"
start_url: "/admin/discovery"
steps:
  - id: step-1-page-load
    description: |
      Navigate to /admin/discovery and verify the discovery interface loads.
      Should see search controls and a way to enter a jurisdiction.
    glm_prompt: "Is this a discovery/search interface? Describe the search inputs and controls visible."
    validation_criteria:
      - "Auto-Discovery"
    exploration_budget: 0

  - id: step-2-jurisdiction-input
    description: |
      Check that there is an input for jurisdiction name (e.g. "San Jose").
      Verify the control is visible and usable.
    glm_prompt: "Is there a jurisdiction input? What placeholder text is shown?"
    validation_criteria:
      - "Enter jurisdiction name"
    exploration_budget: 1

  - id: step-3-empty-state
    description: |
      Without running discovery, confirm the empty state is rendered (no results yet).
      This verifies the page doesn't crash and results area renders cleanly.
    glm_prompt: "Is there an empty state message indicating no results yet?"
    validation_criteria:
      - "No discovery results yet"
    exploration_budget: 0

metadata:
  tags: ["admin", "discovery", "search"]
  priority: 1
  estimated_duration_seconds: 45
